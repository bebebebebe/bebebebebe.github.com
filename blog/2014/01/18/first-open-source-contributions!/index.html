
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>First open source contributions! - Be.</title>
  <meta name="author" content="Be">

  
  <meta name="description" content="I&#8217;m doing an OPW internship at Wikimedia, and last week my first patches were merged in. My project is part of Wikimedia&#8217;s Parsoid, which &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://bebebebebe.github.io/blog/2014/01/18/first-open-source-contributions%21">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Be." type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Be.</a></h1>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:bebebebebe.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">First Open Source Contributions!</h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-01-18T12:46:00-05:00" pubdate data-updated="true">Jan 18<span>th</span>, 2014</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>I&#8217;m doing an <a href='https://wiki.gnome.org/OutreachProgramForWomen'>OPW internship</a> at Wikimedia, and last week my first patches were merged in.</p>

<p>My project is part of Wikimedia&#8217;s Parsoid, which translates back and forth between wikitext (the markup language Wikipedia is written in) and HTML.  The testing framework translates around 160,000 Wikipedia pages from wikitext to HTML and back to wikitext, and then uses diffs to compare the results with the original articles.</p>

<p>You can see test outcomes <a href='http://parsoid.wmflabs.org:8001/'>here</a>. You may notice that some of the views aren&#8217;t very informative, for example the <a href='http://parsoid.wmflabs.org:8001/perfstats'>performance stats view</a>.  I&#8217;m going to make some UI improvements, including data visualizations.  I&#8217;m starting by using templates to separate out the parts of the code responsible only for presentation.</p>

<!-- <a href='https://github.com/wikimedia/mediawiki-services-parsoid/blob/cc4483b83fca5163b100d33bc357070cae2b3e0c/tests/server/server.js'>Here</a> is the code I started with. <!-- While I could readily see that it mixed HTML in with JavaScript, at the start of the project it wasn't obvious to me what was going on in the file: I'd never used <a href='http://nodejs.org/'>Node</a> (and the project is a Node app), had almost no experience with templating, and this was the first time I&#8217;d be understanding and making a contribution to a larger code base written by other people.



##Isolating
Besides talking to my mentors about the roles of different files and function of Parsoid, I found it helpful to isolate aspects of the project that were new to me (templating, Node, and making a patch at all).

* **Templating.**  Since I knew I&#8217;d be using templates to refactor code, just before the internship started I decided to use <a href='http://handlebarsjs.com/'>Handlebars</a> templates to refactor my personal projects page, which <a href='https://gist.github.com/bebebebebe/8514414'>was</a> a simple list of project descriptions with links to code. I separated <a href='https://github.com/bebebebebe/projects/blob/gh-pages/index.html'>layout</a> from <a href='https://github.com/bebebebebe/projects/blob/gh-pages/project_data.js'>data</a>, which made it easier to make UI improvements. <a href='http://bebebebebe.github.io/projects/'>Here</a>&#8217;s the result (now with rollover thumbnail images!).

* **Node apps.**  Starting with tutorials, I made a bunch of small Node example apps, trying out templating systems in most of them. (If you&#8217;re also getting started with Node, I found this introductory <a href='http://debuggable.com/posts/understanding-node-js:4bd98440-45e4-4a9a-8ef7-0f7ecbdd56cb'>post</a> and this <a href='http://www.nodebeginner.org/'>tutorial</a> good starting points.) Last Sunday afternoon I met up with a Hacker School friend to work on turning one of my tutorial examples into a to do app for multiple users with a MySQL database.

* **Making a patch.** Parsoid&#8217;s repo had been recently reorganized and moved, but I noticed that the Readme&#8217;s hadn&#8217;t been updated to reflect this. Making these small updates was a good way to get used to Wikimedia&#8217;s code review tool (Gerrit), learning how to make a patch, request reviewers, interact with comments, amend the patch, and finally see it <a href='https://gerrit.wikimedia.org/r/#/c/106539/'>merged</a> in to the code base.

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>jenkins-bot   Jan 9 12:38 PM
</span><span class='line'>Change has been successfully merged into the git repository.</span></code></pre></td></tr></table></div></figure>

##Back to Parsoid
Now the <a href='https://github.com/wikimedia/mediawiki-services-parsoid/blob/cc4483b83fca5163b100d33bc357070cae2b3e0c/tests/server/server.js'>code</a> I was going to template made a lot more sense. I could see where it made a connection to a MySQL database, defined SQL queries to be used in callback functions, defined callback functions to be called when requests are made, created an app, and routed HTTP requests.

We&#8217;d eventually decided to use Handlebars, and in my example Node apps I&#8217;d learned how to include Handlebars in a Node app, and that when rendering a file Handlebars automatically looks for a layout file in a views directory. After this setup, I got to work refactoring the code for the main stats view.

Instead of the main stats view, let&#8217;s look at one of the simpler pages.  The <a href='http://parsoid.wmflabs.org:8001/crashers'>crashers</a> view is just a list.  Here&#8217;s the function that gets called when this page is requested:

<figure class='code'><figcaption><span>JavaScript with HTML mixed in</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">GET_crashers</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">req</span><span class="p">,</span> <span class="nx">res</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">cutoffDate</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">()</span> <span class="o">-</span> <span class="p">(</span> <span class="nx">cutOffTime</span> <span class="o">*</span> <span class="mi">1000</span> <span class="p">)</span> <span class="p">);</span>
</span><span class='line'>  <span class="nx">db</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span> <span class="nx">dbCrashers</span><span class="p">,</span> <span class="p">[</span> <span class="nx">maxTries</span><span class="p">,</span> <span class="nx">cutoffDate</span> <span class="p">],</span> <span class="kd">function</span> <span class="p">(</span> <span class="nx">err</span><span class="p">,</span> <span class="nx">rows</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span> <span class="nx">err</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span> <span class="nx">err</span> <span class="p">);</span>
</span><span class='line'>      <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span> <span class="nx">err</span><span class="p">.</span><span class="nx">toString</span><span class="p">(),</span> <span class="mi">500</span> <span class="p">);</span>
</span><span class='line'>    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">rows</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
</span><span class='line'>      <span class="nx">res</span><span class="p">.</span><span class="nx">setHeader</span><span class="p">(</span> <span class="s1">&#39;Content-Type&#39;</span><span class="p">,</span> <span class="s1">&#39;text/html; charset=UTF-8&#39;</span> <span class="p">);</span>
</span><span class='line'>      <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span> <span class="mi">200</span> <span class="p">);</span>
</span><span class='line'>      <span class="nx">res</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span> <span class="s1">&#39;&lt;html&gt;&lt;body&gt;&#39;</span> <span class="p">);</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">n</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="nx">res</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span> <span class="s1">&#39;No titles crash the testers!  All\&#39;s well with the world!&#39;</span> <span class="p">);</span>
</span><span class='line'>      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>        <span class="nx">res</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span> <span class="s1">&#39;&lt;h1&gt; The following &#39;</span> <span class="o">+</span> <span class="nx">n</span> <span class="o">+</span> <span class="s1">&#39; titles crash the testers&#39;</span> <span class="o">+</span>
</span><span class='line'>                  <span class="s1">&#39; at least &#39;</span> <span class="o">+</span> <span class="nx">maxTries</span> <span class="o">+</span> <span class="s1">&#39; times&lt;/h1&gt;&#39;</span> <span class="p">);</span>
</span><span class='line'>        <span class="nx">res</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span> <span class="s1">&#39;&lt;ul&gt;&#39;</span> <span class="p">);</span>
</span><span class='line'>        <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="kd">var</span> <span class="nx">prefix</span> <span class="o">=</span> <span class="nx">rows</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">prefix</span><span class="p">,</span>
</span><span class='line'>            <span class="nx">title</span> <span class="o">=</span> <span class="nx">rows</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">title</span><span class="p">;</span>
</span><span class='line'>          <span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="nx">prefix</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="sr">/wiki$/</span><span class="p">,</span> <span class="s1">&#39;&#39;</span> <span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;.wikipedia.org/wiki/&#39;</span> <span class="o">+</span> <span class="nx">title</span><span class="p">;</span>
</span><span class='line'>          <span class="kd">var</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">prefix</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span> <span class="o">+</span> <span class="nx">title</span><span class="p">;</span>
</span><span class='line'>          <span class="kd">var</span> <span class="nx">commitHash</span> <span class="o">=</span> <span class="nx">rows</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">claim_hash</span><span class="p">;</span>
</span><span class='line'>          <span class="nx">res</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span> <span class="s1">&#39;&lt;li&gt;&#39;</span> <span class="o">+</span> <span class="nx">commitHash</span> <span class="o">+</span> <span class="s1">&#39;: &lt;a href=&quot;http://&#39;</span> <span class="o">+</span>
</span><span class='line'>                <span class="nb">encodeURI</span><span class="p">(</span><span class="nx">url</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="s1">&#39;&amp;amp;&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;&quot;&gt;&#39;</span> <span class="o">+</span>
</span><span class='line'>                <span class="nx">name</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="s1">&#39;&amp;amp;&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;&lt;/a&gt;&lt;/li&gt;\n&#39;</span> <span class="p">);</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>        <span class="nx">res</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span> <span class="s1">&#39;&lt;/ul&gt;&#39;</span> <span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="nx">res</span><span class="p">.</span><span class="nx">end</span><span class="p">(</span> <span class="s1">&#39;&lt;/body&gt;&lt;/html&gt;&#39;</span> <span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span> <span class="p">);</span>
</span><span class='line'><span class="p">};</span>
</span></code></pre></td></tr></table></div></figure>
You can see that HTML is sprinkled throughout (look at the lines starting &#8220;`res.write&#8220;`).  As you can see on line 12, we have to render the page differently if &#8220;`n === 0&#8220;` (that is, if the database query returns no rows, which means no titles crashed the testers).  We can get rid of lines 9, 11 and 30, as they are already taken care of in the layout view.  We want a template that we can also use in a similar <a href='http://parsoid.wmflabs.org:8001/failedFetches'>view</a>.   So:

<figure class='code'><figcaption><span>list.html (Handlebars template for list views)</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>{{#if alt}}
</span><span class='line'>  <span class="nt">&lt;h1&gt;</span>{{heading}}<span class="nt">&lt;/h1&gt;</span>
</span><span class='line'>{{else}}
</span><span class='line'>  <span class="nt">&lt;h1&gt;</span>{{heading}}<span class="nt">&lt;/h1&gt;</span>
</span><span class='line'>  <span class="nt">&lt;ul&gt;</span>
</span><span class='line'>    {{#each items}}
</span><span class='line'>      <span class="nt">&lt;li&gt;</span>
</span><span class='line'>        {{#if description}}
</span><span class='line'>          {{description}}:
</span><span class='line'>        {{/if}}
</span><span class='line'>        <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;{{formatUrl url}}&#39;</span><span class="nt">&gt;</span>{{linkName}}<span class="nt">&lt;/a&gt;</span>
</span><span class='line'>      <span class="nt">&lt;/li&gt;</span>
</span><span class='line'>    {{/each}}
</span><span class='line'>  <span class="nt">&lt;/ul&gt;</span>
</span><span class='line'>{{/if}}
</span></code></pre></td></tr></table></div></figure>


Now we can bind this template to data to render our view, like so:
<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">res</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="s1">&#39;list.html&#39;</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>
All that remains is to refactor our GET_crashers function to get rid of the HTML, and define &#8220;`data&#8220;` (lines 14-30 are responsible for this):

<figure class='code'><figcaption><span>refactored JavaScript, HTML free!</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">GET_crashers</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">req</span><span class="p">,</span> <span class="nx">res</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">cutoffDate</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">()</span> <span class="o">-</span> <span class="p">(</span> <span class="nx">cutOffTime</span> <span class="o">*</span> <span class="mi">1000</span> <span class="p">)</span> <span class="p">);</span>
</span><span class='line'>  <span class="nx">db</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span> <span class="nx">dbCrashers</span><span class="p">,</span> <span class="p">[</span> <span class="nx">maxTries</span><span class="p">,</span> <span class="nx">cutoffDate</span> <span class="p">],</span> <span class="kd">function</span> <span class="p">(</span> <span class="nx">err</span><span class="p">,</span> <span class="nx">rows</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span> <span class="nx">err</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span> <span class="nx">err</span> <span class="p">);</span>
</span><span class='line'>      <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span> <span class="nx">err</span><span class="p">.</span><span class="nx">toString</span><span class="p">(),</span> <span class="mi">500</span> <span class="p">);</span>
</span><span class='line'>    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span> <span class="mi">200</span> <span class="p">);</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">rows</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">pageData</span> <span class="o">=</span> <span class="p">[];</span>
</span><span class='line'>      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="kd">var</span> <span class="nx">prefix</span> <span class="o">=</span> <span class="nx">rows</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">prefix</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">title</span> <span class="o">=</span> <span class="nx">rows</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">title</span><span class="p">;</span>
</span><span class='line'>        <span class="nx">pageData</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
</span><span class='line'>          <span class="nx">description</span><span class="o">:</span> <span class="nx">rows</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">claim_hash</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">url</span><span class="o">:</span> <span class="nx">prefix</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="sr">/wiki$/</span><span class="p">,</span> <span class="s1">&#39;&#39;</span> <span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;.wikipedia.org/wiki/&#39;</span> <span class="o">+</span> <span class="nx">title</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">linkName</span><span class="o">:</span> <span class="nx">prefix</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span> <span class="o">+</span> <span class="nx">title</span>
</span><span class='line'>        <span class="p">});</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">heading</span> <span class="o">=</span> <span class="nx">n</span> <span class="o">===</span> <span class="mi">0</span> <span class="o">?</span> <span class="s1">&#39;No titles crash the testers! All\&#39;s well with the world!&#39;</span> <span class="o">:</span>
</span><span class='line'>        <span class="s1">&#39;The following &#39;</span> <span class="o">+</span> <span class="nx">n</span> <span class="o">+</span> <span class="s1">&#39; titles crash the testers at least &#39;</span> <span class="o">+</span>
</span><span class='line'>        <span class="nx">maxTries</span> <span class="o">+</span> <span class="s1">&#39; times &#39;</span><span class="p">;</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>        <span class="nx">alt</span><span class="o">:</span> <span class="nx">n</span> <span class="o">===</span> <span class="mi">0</span><span class="p">,</span>
</span><span class='line'>        <span class="nx">heading</span><span class="o">:</span> <span class="nx">heading</span><span class="p">,</span>
</span><span class='line'>        <span class="nx">items</span><span class="o">:</span> <span class="nx">pageData</span>
</span><span class='line'>      <span class="p">};</span>
</span><span class='line'>      <span class="nx">hbs</span><span class="p">.</span><span class="nx">registerHelper</span><span class="p">(</span><span class="s1">&#39;formatUrl&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">url</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="s1">&#39;http://&#39;</span> <span class="o">+</span> <span class="nb">encodeURI</span><span class="p">(</span><span class="nx">url</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="s1">&#39;&amp;&#39;</span><span class="p">,</span> <span class="s1">&#39;&amp;amp;&#39;</span><span class="p">);</span>
</span><span class='line'>      <span class="p">});</span>
</span><span class='line'>      <span class="nx">res</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="s1">&#39;list.html&#39;</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span> <span class="p">);</span>
</span><span class='line'><span class="p">};</span>
</span></code></pre></td></tr></table></div></figure>
And that&#8217;s all! Now with the data and logic separated from the HTML presentation, it will be much easier to make UI changes.

##Complications&#8230;
I actually started with the main stats view before the simpler crashers view we just looked at.  I had to amend my first code patch several times before it was merged in.  I hadn&#8217;t thought about hard tabs vs spaces for indentation, had left some trailing whitespace here and there, and had failed to take into account that the remote version of the code had changed during the time that I&#8217;d been working on it locally.

Resolving these issues, I learned about git, discovered some useful Sublime text plugins for <a href='https://github.com/uipoet/sublime-jshint'>JavaScript style</a> and for <a href='https://github.com/SublimeText/TrailingSpaces'>trailing whitespace</a>, and looked at the Parsoid team&#8217;s new <a href='https://www.mediawiki.org/wiki/Parsoid/Style_guide'>style guide</a>, with an indentation rule that charmingly asserts of itself that the team does not prefer it.

##Getting faster
In Wikimedia&#8217;s <a href='https://www.youtube.com/watch?v=YD6Tn07FxD0'>Monthly Metrics Meeting</a>, I heard about Google Code In, a program that Wikimedia participated in that gets high school students involved in open source.  Over seven weeks, students work on completing small coding tasks, tasks that might take an experienced developer 1-2 hours to complete.  Towards the beginning of program, students would take 3-5 days to complete a task.  But as they gained experience they got faster, and by the end of the seven weeks some students were completing tasks faster than experienced developers.

My patches are going more smoothly too, as I wrap up the templating part of the project. &#8211;>

</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Be</span></span>

      








  


<time datetime="2014-01-18T12:46:00-05:00" pubdate data-updated="true">Jan 18<span>th</span>, 2014</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/opw/'>opw</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://bebebebebe.github.io/blog/2014/01/18/first-open-source-contributions%21/" data-via="" data-counturl="http://bebebebebe.github.io/blog/2014/01/18/first-open-source-contributions%21/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
      
        <a class="basic-alignment right" href="/blog/2014/02/16/git-slash-gerrit-workflow/" title="Next Post: Git/Gerrit Workflow">Git/Gerrit Workflow &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/02/16/git-slash-gerrit-workflow/">Git/Gerrit Workflow</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/01/18/first-open-source-contributions%21/">First open source contributions!</a>
      </li>
    
  </ul>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Be -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
